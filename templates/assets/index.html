{% extends "suit/base.html" %}

{% block content %}

<div class="container-fluid am-cf">
    <div class="row">
        <div class="am-u-sm-12 am-u-md-12 am-u-lg-9">
            <div class="page-header-heading"><nav class="breadcrumb"><span class="am-icon-home page-header-heading-icon"></span>资产管理 <span class="c-gray en">&gt;</span>资产信息 </nav></div>
        </div>
    </div>

	<div class="row-content am-cf">
		<div class="row">
			<div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
				<div class="widget am-cf">
	                <div class="widget-head am-cf">
	                    <div class="widget-title am-fl">条件查询</div>
	                </div>
                   	<div class="widget-body am-fr">
                   		<form class="am-form tpl-form-line-form " action='/assets/index/' method='GET'>
							<input type="hidden" name="issearch" value=1>
                    		<div class="am-form-group ">
                    			<label class="am-u-sm-3 am-form-label">状态</label>
                    			<div class="am-u-sm-9">
								<select name="searchpublish">
									<option value="">是否发布</option>
									<option value="p" {% ifequal Qset.searchpublish "p" %}selected = "selected"{% endifequal %} >已发布</option>
									<option value="d" {% ifequal Qset.searchpublish "d" %}selected = "selected"{% endifequal %} >已下架</option>
								</select>
								</div>
                    		</div>

                               <div class="am-form-group am-u-sm-6">
                                   <label class="am-u-sm-3 am-form-label">资产名称</label>
                                   <div class="am-u-sm-9">
                                       <input type="text" name="searchasset"  placeholder="根据资产名" value="{{ Qset.searchasset }}">
                                   </div>
                               </div>

                               <div class="am-form-group am-u-sm-6">
                                   <label class="am-u-sm-3 am-form-label">序列号</label>
                                   <div class="am-u-sm-9">
                                       <input type="text" name="searchsn"  placeholder="根据序列号" value="{{ Qset.searchsn }}">
                                   </div>
                               </div>

                               <div class="am-form-group am-u-sm-6">
                                   <label class="am-u-sm-3 am-form-label">IP地址</label>
                                   <div class="am-u-sm-9">
                                       <input type="text" name="searchip"  placeholder="根据ip" value="{{ Qset.searchip }}">
                                   </div>
                               </div>

							<div class="am-form-group am-u-sm-6">
                                    <label for="user-email" class="am-u-sm-3 am-form-label">开始时间</label>
                                    <div class="am-u-sm-9">
                                        <input type="text" name="searchstarttime" class="am-form-field tpl-form-no-bg" placeholder="开始时间" data-am-datepicker="" value="{{ Qset.tmpstarttime }}" readonly="">
                                    </div>
                            </div>
                   		
							<div class="am-form-group am-u-sm-6">
                                    <label for="user-email" class="am-u-sm-3 am-form-label">结束时间</label>
                                    <div class="am-u-sm-9">
                                        <input type="text" name="searchendtime" class="am-form-field tpl-form-no-bg" placeholder="结束时间" data-am-datepicker="" value="{{ Qset.tmpendtime }}" readonly="">
                                    </div>
                            </div>

							<button class="btn btn-success" type="submit">搜索</button>
						</form>
					</div>
				</div>
			</div>
		</div>
		
                <div class="row">
                    <div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
                        <div class="widget am-cf">
                            <div class="widget-head am-cf">
                                <div class="widget-title am-fl"><span>共有数据：<strong>{{ AllCount }}</strong> 条</span></div>
                                <div class="widget-function am-fr">
                                    <a href="javascript:;" class="am-icon-cog"></a>
                                </div>
                            </div>
                            <div class="widget-body  widget-body-lg am-fr">

                                <table width="100%" class="am-table am-table-compact am-table-striped tpl-table-black " id="example-r">
                                    <thead>
                                        <tr>
											<th></th>
											<th>ID</th>
											<th>资产名</th>
											<th>资产类型</th>
											<th>系统类型</th>
											<th>产品名称</th>
											<th>创建时间</th>
											<th>发布状态</th>
											<th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody>
									{% for i in AssetObjs %}
										<tr class="text-c">
											<td><input type="checkbox" value="{{ i.id }}" name="checkboxdel[]"></td>
											<td>{{ i.id }}</td>
											<td>{{ i.asset_name }}</td>
											<td>{{ i.asset_type }}</td>
											<td>{{ i.system_type }}</td>
											<td>{{ i.product }}</td>
											<td>{{ i.timestamp|date:"Y-m-d H:i" }}</td>
											{% ifequal i.status "p" %}
											<td class="td-status"><span class="label label-success">已发布</span></td>
											{% else %}
											<td class="td-status"><span class="label label-warning">已下架</span></td>
											{% endifequal %}
						                    <td>
						                   	<div>
						                   	<p>
						                   	<a href="/web/details/{{ i.id }}" class="btn btn-info btn-xs" role="button" target="_blank">详情</a>
						                   	<a href="/web/terminal/{{ i.id }}" class="btn btn-success btn-xs" role="button" target="_blank">连接</a>
						                   	<button type="button" class="btn btn-danger btn-xs" data-toggle="modal" data-target="#myModal{{ i.id }}">删除</button>
						                   	</p>
											</div>
						                   </td>
										</tr>
									{% endfor %}
                                        <!-- more data -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="pagediv"></ul>{{ PageInfo }}</ul></div>
                        </div>
                    </div>
                </div>
	</div>
</div>




<nav class="breadcrumb">资产管理 <span class="c-gray en">&gt;</span>资产信息 </nav>
<div>
	<form action='/assets/batchdel/' method='POST'>{% csrf_token %}
	<div><span><button type="button" class="btn btn-danger radius" data-toggle="modal" data-target="#myBatchDel">批量删除</button></span> <span>共有数据：<strong>{{ AllCount }}</strong> 条</span> </div>
	<!-- 批量删除的模态框（Modal） -->
	<div class="modal fade" id="myBatchDel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
	            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
	                  &times;
	            </button>
	            <h4 class="modal-title" id="myModalLabel">
				 提示
	            </h4>
	         	</div>
	         	<div class="modal-body">
			 	确定要批量删除主机了？
	         	</div>
	         <div class="modal-footer">
	            <button type="button" class="btn btn-default" data-dismiss="modal">
				关闭
	            </button>
				<input type='submit' value='确认' class="btn btn-primary" role="button"/>
	         </div>
	      </div><!-- /.modal-content -->
		</div><!-- /.modal -->
	</div>
	<div>
		<table class="table table-border table-bordered table-bg table-hover table-sort">
			<thead>
				<tr>
					<th width="25"></th>
					<th width="20">ID</th>
					<th width="80">资产名</th>
					<th width="140">资产类型</th>
					<th width="75">系统类型</th>
					<th width="180">产品名称</th>
					<th width="120">创建时间</th>
					<th width="60">发布状态</th>
					<th width="120">操作</th>
				</tr>
			</thead>
			{% for i in AssetObjs %}
			<tbody>
				<tr class="text-c">
					<td><input type="checkbox" value="{{ i.id }}" name="checkboxdel[]"></td>
					<td>{{ i.id }}</td>
					<td>{{ i.asset_name }}</td>
					<td>{{ i.asset_type }}</td>
					<td>{{ i.system_type }}</td>
					<td>{{ i.product }}</td>
					<td>{{ i.timestamp|date:"Y-m-d H:i" }}</td>
					{% ifequal i.ispublish "p" %}
					<td class="td-status"><span class="label label-success">已发布</span></td>
					{% else %}
					<td class="td-status"><span class="label label-warning">已下架</span></td>
					{% endifequal %}
                    <td>
                   	<div>
                   	<p>
                   	<a href="/web/details/{{ i.id }}" class="btn btn-info btn-xs" role="button" target="_blank">详情</a>
                   	<a href="/web/terminal/{{ i.id }}" class="btn btn-success btn-xs" role="button" target="_blank">连接</a>
                   	<button type="button" class="btn btn-danger btn-xs" data-toggle="modal" data-target="#myModal{{ i.id }}">删除</button>
                   	</p>
								<!-- 模态框（Modal） -->
								<div class="modal fade" id="myModal{{ i.id }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
									<div class="modal-dialog">
										<div class="modal-content">
											<div class="modal-header">
								            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
								                  &times;
								            </button>
								            <h4 class="modal-title" id="myModalLabel">
											 提示
								            </h4>
								         	</div>
								         	<div class="modal-body">
										 	主机号{{ i.id　}} 主机名 {{ i.asset_name }} 要删除了？
								         	</div>
								         <div class="modal-footer">
								            <button type="button" class="btn btn-default" data-dismiss="modal">
											关闭
								            </button>
								            <a href="/web/del/{{ i.id　}}"  class="btn btn-primary" role="button">
											确认
								            </a>
								         </div>
								      </div><!-- /.modal-content -->
									</div><!-- /.modal -->
								</div>
					</div>
                   </td>
				</tr>
			</tbody>
			{% endfor %}
		</table>
	</div>
	</form>
</div>

<div class="pagediv"></ul class="pure-paginator">{{ PageInfo }}</ul></div>

{% if popover %}
<div id="myPopover" class="alert alert-warning">
	<a href="#" class="close" data-dismiss="alert">&times;</a>
	{% if popover.id %}
	<strong>成功！</strong>删除了主机{{ popover.id }}
	{% else %}
	<strong>抱歉！</strong>{{ popover.info }}
	{% endif %}
</div>
<script type="text/javascript">
$(document).ready(function(){ 
	setTimeout(function(){alert("{{ popover.info }}{{ popover.id }}");},10);  
}); 
</script>  
{% endif %}


{% endblock %}